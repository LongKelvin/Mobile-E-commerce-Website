<style>
    .image {
        display: none;
    }
</style>






@model IEnumerable<MobileShopConnectionString.Product>
@{
    var currencyFormat = System.Globalization.CultureInfo.GetCultureInfo("vi-VN");
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_MainLayout.cshtml";
}
<!-- Bootstrap Core CSS -->
<link rel="stylesheet" href="~/Asset/css/bootstrap.min.css" type="text/css">

<!-- Custom CSS -->
<link rel="stylesheet" href="~/Asset/css/style.css">

<div class="row">
    <div class="col-lg-12">
        <div class="heading"><h2>SPECIAL PRODUCTS</h2></div>
        <div class="products">

            @foreach (var item in Model)
            {

                <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                    <div class="product">

                        <div class="image"><a href="@Url.Action("Details", "Shop", new {id=item.ProductID })"><img src="~/Asset/images/loading.gif" onload="this.onload = null; this.src = getProductImageByID('@item.ProductImageID');" /></a></div>
                        <div class="buttons">
                            <a class="btn cart" href="#"><span class="glyphicon glyphicon-shopping-cart"></span> </a>
                            <a class="btn wishlist" href="#"><span class="glyphicon glyphicon-heart"></span></a>
                            <a class="btn compare" href="#"><span class="glyphicon glyphicon-transfer"></span></a>
                        </div>
                        <div class="caption">
                            <div class="name"><h3><a href="@Url.Action("Details", "Shop", new {id=item.ProductID })">@item.ProductName</a></h3></div>

                            <div class="price">@String.Format(currencyFormat, "{0:c0}", item.ProductPrice);</div>
                            <div class="rating"><span class="glyphicon glyphicon-star"></span><span class="glyphicon glyphicon-star"></span><span class="glyphicon glyphicon-star"></span><span class="glyphicon glyphicon-star"></span><span class="glyphicon glyphicon-star-empty"></span></div>
                        </div>
                    </div>
                </div>
            }

            @*<div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                    <div class="product">
                        <div class="image"><a href="@Url.Action("Details", "Shop", new {id=1 })"><img src="~/Asset/images/galaxy-s4.jpg" /></a></div>
                        <div class="buttons">
                            <a class="btn cart" href="#"><span class="glyphicon glyphicon-shopping-cart"></span></a>
                            <a class="btn wishlist" href="#"><span class="glyphicon glyphicon-heart"></span></a>
                            <a class="btn compare" href="#"><span class="glyphicon glyphicon-transfer"></span></a>
                        </div>
                        <div class="caption">
                            <div class="name"><h3><a href="@Url.Action("Details", "Shop", new {id=1 })">Aliquam erat volutpat</a></h3></div>
                            <div class="price">$122<span>$98</span></div>
                            <div class="rating"><span class="glyphicon glyphicon-star"></span><span class="glyphicon glyphicon-star"></span><span class="glyphicon glyphicon-star"></span><span class="glyphicon glyphicon-star-empty"></span><span class="glyphicon glyphicon-star-empty"></span></div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                    <div class="product">
                        <div class="image"><a href="@Url.Action("Details", "Shop", new {id=1 })"><img src="~/Asset/images/galaxy-note.jpg" /></a></div>
                        <div class="buttons">
                            <a class="btn cart" href="#"><span class="glyphicon glyphicon-shopping-cart"></span></a>
                            <a class="btn wishlist" href="#"><span class="glyphicon glyphicon-heart"></span></a>
                            <a class="btn compare" href="#"><span class="glyphicon glyphicon-transfer"></span></a>
                        </div>
                        <div class="caption">
                            <div class="name"><h3><a href="@Url.Action("Details", "Shop", new {id=1 })">Aliquam erat volutpat</a></h3></div>
                            <div class="price">$122<span>$98</span></div>
                            <div class="rating"><span class="glyphicon glyphicon-star"></span><span class="glyphicon glyphicon-star"></span><span class="glyphicon glyphicon-star-empty"></span><span class="glyphicon glyphicon-star-empty"></span><span class="glyphicon glyphicon-star-empty"></span></div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                    <div class="product">
                        <div class="image"><a href="@Url.Action("Details", "Shop", new {id=1 })"><img src="~/Asset/images/Z1.png" /></a></div>
                        <div class="buttons">
                            <a class="btn cart" href="#"><span class="glyphicon glyphicon-shopping-cart"></span></a>
                            <a class="btn wishlist" href="#"><span class="glyphicon glyphicon-heart"></span></a>
                            <a class="btn compare" href="#"><span class="glyphicon glyphicon-transfer"></span></a>
                        </div>
                        <div class="caption">
                            <div class="name"><h3><a href="@Url.Action("Details", "Shop", new {id=1 })">Aliquam erat volutpat</a></h3></div>
                            <div class="price">$122<span>$98</span></div>
                            <div class="rating"><span class="glyphicon glyphicon-star"></span><span class="glyphicon glyphicon-star"></span><span class="glyphicon glyphicon-star"></span><span class="glyphicon glyphicon-star"></span><span class="glyphicon glyphicon-star"></span></div>
                        </div>
                    </div>
                </div>*@
        </div>
    </div>
</div>




<script type="text/javascript">

    $(document).ready(function () {

        $(".products").ready(function () {
            $(".image").each(function () {
                $(this).fadeIn("slow");
            });
        });

    });

    //window.onload = () => {
    //    // run in onload
    //    setTimeout(() => {
    //        $(".products").ready(function () {
    //            $(".image").each(function () {
    //                $(this).fadeIn("slow");
    //            });
    //        });
    //    }, 1000)
    //}


    function getProductImageByID(ID) {

        var data = ID
        var result = null

        $.ajax({
            type: "GET",
            async: false,
            url: "/Shop/GetProductImageByID",
            data: { productImageID: data },
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (response) {

                result = response;

            },
            failure: function (response) {
                alert(response.d);
            },
            error: function (response) {
                alert(response.d);
            }
        });

        var path = "/Asset/images/";
        return path + result;
    }


</script>